<div id="CodeTableApi">
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> CodeTable/{Id}</h2>
<h3>Description</h3>
<p>Returns the active code table entries for the specified code table Id ordered as configured in the CRM.</p>
<p>If the provided code table Id is valid, then this will return the active code table entries for the specified code table.  The entries will be ordered as configured in the CRM.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>Id</strong>
      (GUID)
      Id of a code table.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>404 Not Found</li>
  <li>No code table was found by the specified Id.</li>
</ul>
<ul>
  <li>200 OK</li>
  <li>Array of Code Table Entry</li>
  <li>Returns an array of code table entries.</li>
  <li>
    <pre><code>[ { "Description": "Mr.", "Id": "aa784eae-4649-43ce-bf5a-0d2fccb01807" }, { "Description": "Mrs.", "Id": "ca590da0-2884-4c90-86ef-a349d6ea6b09" } ]</code></pre>
  </li>
</ul>
</div>
<div id="CountryApi">
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> Country</h2>
<h3>Description</h3>
<p>Returns a list of all active countries alphabetized by their description.</p>
<p>Will return information about all active countries alphabetized by their description.</p>
<h3>Returns</h3>
<ul>
  <li>200 OK</li>
  <li>Array of Countries</li>
  <li>Returns an array country objects</li>
  <li>
    <pre><code>[ { "Id": "2C3F57A7-65DE-4D55-89EF-7857E6EDD53C", "Abbreviation": "CA", "Description": "Canada" }, { "Id": "B4837D3E-36F6-42F4-8049-CC2A2B108F9E", "Abbreviation": "US", "Description": "United States" } ]</code></pre>
  </li>
</ul>
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> Country/{Id}</h2>
<h3>Description</h3>
<p>Returns information about a specific country.</p>
<p>If the provided country Id is valid, then this will return information about the country.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>Id</strong>
      (GUID)
      Id of a country.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>404 Not Found</li>
  <li>No country was found by the specified Id.</li>
</ul>
<ul>
  <li>200 OK</li>
  <li>Country</li>
  <li>Returns a country object</li>
  <li>
    <pre><code>{ "Id": "B4837D3E-36F6-42F4-8049-CC2A2B108F9E", "Abbreviation": "US", "Description": "United States" }</code></pre>
  </li>
</ul>
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> Country/{Id}/State</h2>
<h3>Description</h3>
<p>Returns a list of states associated with a country, alphabetized by their description.</p>
<p>If the provided country Id is valid, then this will return a list of state objects for each state associated with the country.   The states will be returned alphabetized description.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>Id</strong>
      (GUID)
      Id of a country.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>404 Not Found</li>
  <li>No country was found by the specified Id.</li>
</ul>
<ul>
  <li>200 OK</li>
  <li>Array of States</li>
  <li>Returns an array of state objects for the given country alphabetized by their description.</li>
  <li>
    <pre><code>[ { "Id": "ba9b5958-b1d0-43ed-ba37-5e7c0eddfc78", "Abbreviation": "RI", "Description": "Rhode Island" }, { "Id": "70BF9733-5D24-46F4-A40C-61F6D2765575', "Abbreviation": "SC", "Description": "South Carolina" } ]</code></pre>
  </li>
</ul>
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> Country/{Id}/AddressCaptions</h2>
<h3>Description</h3>
<p>Returns the captions for Address Lines, City, State, and Postcode.</p>
<p>If the provided country Id is valid, then this will return the captions for address lines, city, state, and postcode.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>Id</strong>
      (GUID)
      Id of a country.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>404 Not Found</li>
  <li>No country was found by the specified Id.</li>
</ul>
<ul>
  <li>200 OK</li>
  <li>Address Captions</li>
  <li>Returns an AddressCaptions object containing the labels for Address Lines, City, State, and Postcode.</li>
  <li>
    <pre><code>{ "AddressLines": "Address", "City": "City", "PostCode": "Zip", "State": "State" }</code></pre>
  </li>
</ul>
</div>
<div id="DonationApi">
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> {PartId}/Donation/{Id}</h2>
<h3>Description</h3>
<p>Gets the donation object of the specified Id if the user has appropriate access.</p>
<p>Ensures the user has access to this donation by finding the Id in their session.  If so, loads the donation out of the database.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>PartId</strong>
      (Integer)
      Id of a donation form part.<br><span class="label label-danger">required</span></li>
  <li><strong>Id</strong>
      (GUID)
      Id of a donation.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>403 Forbidden</li>
  <li>User does not have access to the specified donation.</li>
</ul>
<ul>
  <li>404 Not Found</li>
  <li>No donation was found by the specified Id.</li>
</ul>
<ul>
  <li>200 OK</li>
  <li>Donation</li>
  <li>Returns a Donation object containing information about the requested donation Id.</li>
  <li>
    <pre><code>{ "Donor":{ "Address":{ "City":"Columbia", "Country":"United States", "PostalCode":"29212", "State":"SC", "StreetAddress":"123 Main St." }, "EmailAddress":"john.doe@blackbaud.com", "FirstName":"John", "LastName":"Doe", "Phone":"555-555-5555", "Title":"Mr." }, "Gift":{ "Designations": [{ "Amount":5, "DesignationId":"3439a5c7-9977-4f9c-ba11-fadfb8144d35" }], "FinderNumber":0, "SourceCode":"Sample Source Code", "IsAnonymous":false, "PaymentMethod":1, "Comments":"Gift comments here.", "CreateGiftAidDeclaration":false, "Attributes": [{ "AttributeId":"BD18B3FD-B382-4183-A415-8F84B1E0E411", "Value":"Volunteer;Member;Alumni" }, { "AttributeId":"3607C77D-19DC-4EE0-A0CD-A352762A8EF0", "Value":"1985" }], "Recurrence": { "DayOfMonth":26, "DayOfWeek":null, "EndDate":null, "Frequency":2, "Month":null, "StartDate":"Date(1337227200000-0400)" }, "Tribute": { "Acknowledgee": { "AddressLines":"123 Sunset ln.", "City":"Charleston", "Country":"USA", "Email":"email@address.com", "FirstName":"Jane", "LastName":"Doe", "Phone":"123-123-1234", "PostalCode":"29482", "State":"SC" }, "TributeDefinition": { "Description":"New tribute", "FirstName":"John", "LastName":"Hancock", "Type":"Tribute" }, "TributeId":null } }, "Id":"853f96be-bf08-4828-aefa-326a06e48d31"," Origin":{ "AppealId":"C3B20FD8-6A81-451E-BF78-D195E82B4CBF", "PageId":784, "PageName":"Sample Page" }, "TransactionStatus":1 }</code></pre>
  </li>
</ul>
<h2 id="blackbaud:header"><small><span class="label label-default">POST</span></small> {PartId}/Donation/Create</h2>
<h3>Description</h3>
<p>Attempts to create a donation from the posted object.</p>
<p>Validates the fields in the posted CreateDonationRequest.  If valid, creates a donation transaction and saves it to the database. Stores the Id of the new donation in session so the user has permissions for the donation instance.  If the payment type is credit card, communicates with Blackbaud secured payment to set up a check out URI and adds that URI to the return object.  For credit card payment, the donation is saved in a Pending state.  For payments not using a credit card, the donation is saved in a Completed state and an acknowledgement email is sent.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>PartId</strong>
      (Integer)
      Id of a donation form part.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>400 Bad Request</li>
  <li>Error[]</li>
  <li>
                        A validation error was found with the post data or an error occurred in the processing.  Returns an array of Errror objects.

Possible Errors:
•	RecordNotFound (106)
•	RequiredFieldMissing (101)
•	InvalidFieldSupplied (102)
•	ValueBelowMinimum (103)
•	ValueExceedsMaximum (104)
•	ValueNotAllowed (105)
•	ExceedsMaximumLength (107)</li>
  <li>
    <pre><code>[ { "ErrorCode":101, "Field":"Donor.LastName", "Message":null }, { "ErrorCode":103, "Field":"Gift.Designations.Amount", "Message":"A designation's amount should be greater than 0." } ]</code></pre>
  </li>
</ul>
<ul>
  <li>201 OK</li>
  <li>CreateDonationReply</li>
  <li>Returns a CreateDonationReply object containing information about the created donation and optionally a Uri for completing payment of the donation with Blackbaud secured payment. A location header is also returned containing a Uri of the new donation object.  If the part is configured to use a Payment 2.0 page, the reply will contain a URI to the selected payment page instead of a secure payment URI.</li>
  <li>
    <pre><code>{ "Donation":{ "Donor":{ "Address":{ "City":"Columbia", "Country":"United States", "PostalCode":"29212", "State":"SC", "StreetAddress":"123 Main St." }, "EmailAddress":"john.doe@blackbaud.com", "FirstName":"John", "LastName":"Doe", "Phone":"555-555-5555", "Title":"Mr." }, "Gift":{ "Designations": [{ "Amount":5, "DesignationId":"3439a5c7-9977-4f9c-ba11-fadfb8144d35" }], "FinderNumber":0, "IsAnonymous":false, "PaymentMethod":1, "Comments":"Gift comments here.", "CreateGiftAidDeclaration":false, "Attributes": [{ "AttributeId":"BD18B3FD-B382-4183-A415-8F84B1E0E411", "Value":"Volunteer;Member;Alumni" }, { "AttributeId":"3607C77D-19DC-4EE0-A0CD-A352762A8EF0", "Value":"1985" }], "Recurrence": { "DayOfMonth":26, "DayOfWeek":null, "EndDate":null, "Frequency":2, "Month":null, "StartDate":"\/Date(1337227200000-0400)\/" }, "Tribute": { "Acknowledgee": { "AddressLines":"123 Sunset ln.", "City":"Charleston", "Country":"USA", "Email":"email@address.com", "FirstName":"Joe", "LastName":"Schmo", "Phone":"123-123-1234", "PostalCode":"29482", "State":"SC" }, "TributeDefinition": { "Description":"New tribute", "FirstName":"John", "LastName":"Hancock", "Type":"Tribute" }, "TributeId":null } }, "Id":"853f96be-bf08-4828-aefa-326a06e48d31"," Origin":{ "AppealId":"C3B20FD8-6A81-451E-BF78-D195E82B4CBF", "PageId":784, "PageName":"Sample Page" }, "TransactionStatus":1 }, "BBSPCheckoutUri":" https://payments.blackbaud.com/Pages/Index.aspx?t=853f96be-bf08-4828-aefa-326a06e48d31" }</code></pre>
  </li>
</ul>
<h2 id="blackbaud:header"><small><span class="label label-default">POST</span></small> {PartId}/Donation/{Id}/CompleteBBSPDonation</h2>
<h3>Description</h3>
<p>Signals the application to confirm that the donation has been paid in Blackbaud secured payment and to complete the creation of the donation.</p>
<p>Ensures the user has access to this donation by finding the Id in their session.  If so, loads the donation out of the database.  Ensures the donation is a credit card donation and not already in a completed state.  If not, then confirms with Blackbaud secured payment whether the donation is paid.  If so, updates the donation status and sends the acknowledgment email.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>PartId</strong>
      (Integer)
      Id of a donation form part.<br><span class="label label-danger">required</span></li>
  <li><strong>Id</strong>
      (GUID)
      Id of a donation.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>403 Forbidden</li>
  <li>User does not have access to the specified donation.</li>
</ul>
<ul>
  <li>404 Not Found</li>
  <li>No donation was found by the specified Id.</li>
</ul>
<ul>
  <li>400 Bad Request</li>
  <li>Error[]</li>
  <li>
                        The donation payment was not properly completed in Blackbaud secured payment or the donation has already been marked as completed.

Possible Errors:
•	InvalidOperation (102)
•	BBSPTransactionNotProcessed (203)</li>
  <li>
    <pre><code>[ { "ErrorCode":102, "Field":null, "Message":null } ]</code></pre>
  </li>
</ul>
<ul>
  <li>200 OK</li>
  <li>Donation</li>
  <li>Ensures the user has access to this donation by finding the Id in their session.  If so, loads the donation out of the database.  Ensures the donation is a credit card donation and not already in a completed state.  If not, then confirms with Blackbaud secured payment whether the donation is paid.  If so, updates the donation status and sends the acknowledgment email.</li>
  <li>
    <pre><code>{ "Donor":{ "Address":{ "City":"Columbia", "Country":"United States", "PostalCode":"29212", "State":"SC", "StreetAddress":"123 Main St." }, "EmailAddress":"john.doe@blackbaud.com", "FirstName":"John", "LastName":"Doe", "Phone":"555-555-5555", "Title":"Mr." }, "Gift":{ "Designations": [{ "Amount":5, "DesignationId":"3439a5c7-9977-4f9c-ba11-fadfb8144d35" }], "FinderNumber":0, "IsAnonymous":false, "PaymentMethod":1, "Comments":"Gift comments here.", "CreateGiftAidDeclaration":false, "Attributes": [{ "AttributeId":"BD18B3FD-B382-4183-A415-8F84B1E0E411", "Value":"Volunteer;Member;Alumni" }, { "AttributeId":"3607C77D-19DC-4EE0-A0CD-A352762A8EF0", "Value":"1985" }], "Recurrence": { "DayOfMonth":26, "DayOfWeek":null, "EndDate":null, "Frequency":2, "Month":null, "StartDate":"\/Date(1337227200000-0400)\/" }, "Tribute": { "Acknowledgee": { "AddressLines":"123 Sunset ln.", "City":"Charleston", "Country":"USA", "Email":"email@address.com", "FirstName":"Joe", "LastName":"Schmo", "Phone":"123-123-1234", "PostalCode":"29482", "State":"SC" }, "TributeDefinition": { "Description":"New tribute", "FirstName":"John", "LastName":"Hancock", "Type":"Tribute" }, "TributeId":null } }, "Id":"853f96be-bf08-4828-aefa-326a06e48d31"," Origin":{ "AppealId":"C3B20FD8-6A81-451E-BF78-D195E82B4CBF", "PageId":784, "PageName":"Sample Page" }, "TransactionStatus":1 }</code></pre>
  </li>
</ul>
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> {PartId}/Donation/{Id}/ConfirmationHtml</h2>
<h3>Description</h3>
<p>Gets HTML for a confirmation screen for the completed donation.</p>
<p>Ensures the user has access to this donation by finding the Id in their session.  If so, loads the donation out of the database and merges the fields into the part’s confirmation block.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>PartId</strong>
      (Integer)
      Id of a donation form part.<br><span class="label label-danger">required</span></li>
  <li><strong>Id</strong>
      (GUID)
      Id of a donation.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>403 Forbidden</li>
  <li>User does not have access to the specified donation.</li>
</ul>
<ul>
  <li>404 Not Found</li>
  <li>No donation was found by the specified Id.</li>
</ul>
<ul>
  <li>200 OK</li>
  <li>String</li>
  <li>Returns a string containing the HTML block of the confirmation with the donation fields merged in.</li>
  <li>
    <pre><code>“&amp;lt;div&amp;gt;Thank you for donating $10.00.&amp;lt;/div&amp;gt;”</code></pre>
  </li>
</ul>
</div>
<div id="ImageApi">
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> Images?FolderGUID={Id}</h2>
<h3>Description</h3>
<p>Gets the image objects that the user has access to within the specified folder.</p>
<p>Returns information about all images that the current user has access to and exist within the specified folder.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>Id</strong>
      (GUID)
      Id of an image folder.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>200 OK</li>
  <li>Array of Images</li>
  <li>Returns an array of Image objects that current user has access to and exist within the specified folder.</li>
  <li>
    <pre><code>[ { "Caption": "Sunset", "Url": "http://www.mydomain.com/image/sunset.jpg" } ]</code></pre>
  </li>
</ul>
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> Images?Tag={TagName}</h2>
<h3>Description</h3>
<p>Gets the image objects that the user has access to tagged with the specified tag.</p>
<p>Returns information about all images that the current user has access to and are tagged with the specified tag.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>TagName</strong>
      (String)
      Name of the tag<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>200 OK</li>
  <li>Array of Images</li>
  <li>Returns an array of Image objects that current user has access to and are tagged with the specified tag.</li>
  <li>
    <pre><code>[ { "Caption": "Sunset", "Url": "http://www.mydomain.com/image/sunset.jpg" } ]</code></pre>
  </li>
</ul>
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> Images/{FolderName}/SubFolderName}</h2>
<h3>Description</h3>
<p>Gets the image objects that the user has access to under the specified folder name/path.</p>
<p>Returns information about all images that the current user has access to and exist under the specified folder path.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>FolderName</strong>
      (String)
      Path/name of the folder.<br><span class="label label-danger">required</span></li>
</ul>
<h3>Returns</h3>
<ul>
  <li>200 OK</li>
  <li>Array of Images</li>
  <li>Returns an array of Image objects that current user has access to and exist under the specified folder path.</li>
  <li>
    <pre><code>[ { "Caption": "Sunset", "Url": "http://www.mydomain.com/image/sunset.jpg" } ]</code></pre>
  </li>
</ul>
<ul>
  <li>404 Not Found</li>
  <li>No folder exists at the given path.</li>
</ul>
</div>
<div id="QueryApi">
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> 
                Query/{Id}?Column1Name={ColumnFilter}&amp;Column2Name={ColumnFilter}
            </h2>
<h3>Description</h3>
<p>Returns the results for the specified query.</p>
<p>Returns the result of executing the specified, published query.  The query is executed as the last user to save the query.  The results are cached and may be up to 10 minutes old.  The results are limited to 5000 rows.</p>
<h3>Parameters</h3>
<ul>
  <li><strong>Id</strong>
      (GUID)
      Id of a query that has been published.<br><span class="label label-danger">required</span></li>
  <li><strong>ColumnFilter</strong>
      (String)
      Filters the results to rows that contain the specified value in the specified column.  When specifying a column, use the name that is found in the query response.  Depending on the type of column being filtered, the results may filter to rows that exactly match the specified value instead of those that contain the specified value.  Summary columns such as MAX, MIN, and COUNT cannot be used as filters and will be ignored.</li>
</ul>
<h3>Returns</h3>
<ul>
  <li>404 Not Found</li>
  <li>No published query was found by the specified Id.</li>
</ul>
<ul>
  <li>200 OK</li>
  <li>QueryResults</li>
  <li>Returns a Query object containing results of executing the specified query.</li>
  <li>
    <pre><code>{ "Fields": [ { "Caption": "ID", "Name": "System record ID" }, { "Caption": "Fund", "Name": "Purpose\Public Name" } ], "Rows":[ { Values: [ "1BB27696-3045-405E-BD74-DC8853506977", "Sample Designation 1" ] }, { Values: [ "2AE550FB-B3FC-43CE-A07A-B23C45BF1A2E", "Sample Designation 2" ] }, { Values: [ "2AE550FB-B3FC-43CE-A07A-B23C45BF1A2E", "Sample Designation 3" ] } ] }</code></pre>
  </li>
</ul>
</div>
<div id="UserApi">
<h2 id="blackbaud:header"><small><span class="label label-default">GET</span></small> User</h2>
<h3>Description</h3>
<p>Gets basic profile information about the current user.</p>
<p>Returns profile information for the current user.  If the user is not logged in, then it may be populated based on the current email-recipient information.</p>
<h3>Returns</h3>
<ul>
  <li>200 OK</li>
  <li>UserInformation</li>
  <li>Returns profile information about the current user.</li>
  <li>
    <pre><code>{ "Addresses": [ { "City": "Daniel Island", "Country": "United States", "Id": "53064038-dea9-48d4-bbd6-42725f78b234", "IsPrimary": true, "PostalCode": "29464", "State": "SC", "StreetAddress": "123 Sample Drive", "Type": "fda0e1f0-6918-4e96-8cb5-9a9a841d4ee6" }, { "City": "Columbia", "Country": "United States", "Id":" d35a3299-407b-465f-b3f1-43465a60713e", "IsPrimary": false, "PostalCode": "29212", "State": "SC", "StreetAddress": "200 Harbison Boulevard", "Type": "17b13db9-1fab-4203-8b66-a2f26db637c5" } ], "EmailAddresses": [ { "EmailAddress": "JohnDoe@organization.com", "Id": "9127174d-4b16-4c38-8b35-f0dbc61d7e27", "IsPrimary": true, "Type": "51d52fc2-6ac1-4687-bec0-c4fed5a05b65" }, { "EmailAddress": "JohnDoe@personal.com", "Id": "8e48a013-6484-42b8-9746-c40a8eee9729", "IsPrimary": false, "Type": "51d52fc2-6ac1-4687-bec0-c4fed5a05b65" } ], "FirstName": "John", "LastName": "Doe", "Phone": "803-781-8851", "Title": "Mr" }</code></pre>
  </li>
</ul>
</div>
