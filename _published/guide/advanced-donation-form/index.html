<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Blackbaud Internet Solutions | Developer Guide | Advanced Donation Form</title> <link rel="icon" href="/bbis/assets/img/favicon.ico" type="image/ico"> <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"> <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"> <link rel="stylesheet" href="/bbis/assets/css/combine.site.css?v=2014-12-10-02:01:59"> </head> <body class="layout-compress section-guide subsection-advanced-donation-form"> <nav class="navbar" role="navigation" id="top"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bb-navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a href="/bbis/" class="navbar-brand"> <img src="/bbis/assets/img/logo-bbis.png" alt="Blackbaud Internet Solutions" class="img-responsive" /> </a> </div> <!-- navbar-header --> <div class="collapse navbar-collapse" id="bb-navbar"> <ul class="nav navbar-nav navbar-right"> <li > <a href="/bbis/start/"> Getting Started </a> </li> <li class="active"> <a href="/bbis/guide/"> Developer Guide </a> </li> <li > <a href="/bbis/reference/"> Technical Reference </a> </li> <li class=""> <a href="/bbis/code/"> Code Samples </a> </li> <li > <a href="/bbis/help/"> <i class="fa fa-fw fa-question-circle hidden-xs"></i> <span class="visible-xs-inline">Help</span> </a> </li> </ul> </div> <!-- .navbar-collapse --> </div> <!-- .container --> </nav> <!-- .navbar.navbar-inverse --> <div class="content"> <div class="container"> <div class="row"> <div class="col-md-3 hidden-xs hidden-sm"> <div class="sidebar"> <ul class="nav nav-pills nav-stacked nav-sidebar"> <!-- Ridiculous Bootstrap Scrollspy bug that required this nested linkage to function properly --> <li class="hidden"> <a href="#top">Top</a> <ul class="nav"> <li> <a href="#top">Top</a> </li> </ul> </li> <li class="back-to back-to-section"> <a href="/bbis/guide/"> Developer Guide </a> </li> <li class=" active scrollspy-start "> <a href="/bbis/guide/advanced-donation-form/">Advanced Donation Form</a> <ul class="nav"> <li> <a href="#setup">Setup</a> </li> <li> <a href="#example-barebones">Example - Barebones</a> </li> <li> <a href="#example-payment-2-0">Example - Payment 2.0</a> </li> <li> <a href="#example-recurrence">Example - Recurrence</a> </li> <li> <a href="#example-tribute">Example - Tribute</a> </li> <li> <a href="#example-secure-payments">Example - Blackbaud Secure Payments</a> </li> <li> <a href="#example-complete">Example - Complete</a> </li> </ul> </li> <li class=""> <a href="/bbis/guide/blackbaud-secure-payments/">Blackbaud Secure Payments</a> </li> <li class=""> <a href="/bbis/guide/custom-content-parts/">Custom Content Parts</a> </li> <li class=""> <a href="/bbis/guide/custom-framework-parts/">Custom Framework Parts</a> </li> <li class=""> <a href="/bbis/guide/custom-handlers/">Custom Handlers</a> </li> <li class=""> <a href="/bbis/guide/user-imports/">User Imports</a> </li> <li class="back-to back-to-top"> <a href="#top" class=""> <i class="fa fa-caret-square-o-up"></i> </a> </li> </ul> </div> </div> <!-- .col-md-3 --> <div class="col-md-9 readability"> <h2 id="setup">Advanced Donation Form</h2> <p>The Advanced Donation Form Part and accompanying REST APIs were released in version 3.0 of BBIS. They allow completely custom interfaces to be created for the donation experience, relaying the necessary information to the backend via the REST API or JavaScript SDK. For a complete list of possible options, be sure to visit the <a href="/bbis/reference/rest/#donationapi">technical reference</a> for more information.</p> <p>All the examples below expect a page with a configured instance of the Advanced Donation Form Part on it. It's also important the examples below are meant to be as simple and straight-forward as possible. In a real-world scenario, we highly suggestion following standard web practices for form design, including labels for accessibility, and client-side data validation.</p> <p>For all the Advanced Donation Form examples, I've split the grouped the content by language - HTML, CSS, or JS; however, when using the code in the Advanced Donation Form Part, the code is combined into a single textarea. Please be certain to wrap the content with appropriate <code>&lt;script&gt;</code> or <code>&lt;style&gt;</code> tag.</p> <h3 id="example-barebones">Barebones Example</h3> <p>In our first example, we'll create a very barebones example of a donation form, supplying only the required fields. For this example we've included no styling or error handling, other than displaying a message in the console. I've also hard-coded the designation and amount fields.</p> <p class="alert alert-warning"><span class="label label-warning">Important</span> The DonationService constructor requires the Advanced Donation Form Part ID. In the examples below, we dynamically find this ID. You could hard-code this value if you prefer. The technique below assumes there's only one Advanced Donation Form Part per page.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-barebones-html" data-toggle="tab">HTML</a></li> <li><a href="#example-barebones-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-barebones-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;first-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;last-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;email&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">&quot;address&quot;</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;city&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;state&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;zip&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;country&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn-donate&quot;</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-barebones-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let&#39;s be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Let&#39;s make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.BBDonationApiContainer&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;partid&#39;</span><span class="p">)</span>
    <span class="p">);</span>

    <span class="c1">// Create the donation object we&#39;ll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">MerchantAccountId</span><span class="o">:</span> <span class="s1">&#39;00000000-0000-0000-0000-000000000000&#39;</span><span class="p">,</span>
      <span class="nx">Gift</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">PaymentMethod</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">Designations</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nx">Amount</span><span class="o">:</span> <span class="mf">5.00</span><span class="p">,</span>
            <span class="nx">DesignationId</span><span class="o">:</span> <span class="s1">&#39;00000000-0000-0000-0000-000000000000&#39;</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error!&#39;</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.btn-donate&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 

      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">FirstName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#first-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">LastName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#last-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">Address</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">StreetAddress</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#address&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">City</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#city&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">State</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#state&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">PostalCode</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#zip&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">Country</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#country&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>

  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-payment-2-0">Using the Payment 2.0 Part</h3> <p>When using the Payment 2.0 Part, the information required is reduced. For example, Donor information is should no longer be provided. Again, we're not including any styling or error handling, but I have introduced the ability to select a donation amount and designation.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-payment-2-0-html" data-toggle="tab">HTML</a></li> <li><a href="#example-payment-2-0-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-payment-2-0-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Amount<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;amount&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>5<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="nt">&gt;</span>10<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;20&quot;</span><span class="nt">&gt;</span>20<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Designation<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;designation&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="nt">&gt;</span>Example Designation 1<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;00000000-0000-0000-0000-000000000000&quot;</span><span class="nt">&gt;</span>Example Designation 2<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
      
<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn-donate&quot;</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-payment-2-0-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let&#39;s be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let&#39;s make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.BBDonationApiContainer&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;partid&#39;</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we&#39;ll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">Gift</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">PaymentMethod</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">Designations</span><span class="o">:</span> <span class="p">[]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error!&#39;</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.btn-donate&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
      
      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Designations</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">Amount</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#amount&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">DesignationId</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#designation&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">});</span>
      
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <p class="alert alert-info"><span class="label label-info">Note</span> The <a href="/bbis/reference/javascript/#donationservice">DonationService</a> attempts to redirect to the BBSPCheckoutUri or PaymentPageUri if either of them exist (in that order) after a successful callback from the <a href="/bbis/reference/javascript/#donationservice-createdonation">createDonation</a> method.</p> <h3 id="example-recurrence">Recurrence Example</h3> <p>In this example, we're back to "proceeding directly to payment," as opposed to using the Payment 2.0 Part. This means we'll need to collect the donor information.</p> <p>Using recurrence with the Advanced Donation Form can be a little tricky, in that the fields which are required, differs depending on the frequency of the recurrence. For example, the Month field is only valid and required if the Frequency field is set to Annually (4).</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-recurrence-html" data-toggle="tab">HTML</a></li> <li><a href="#example-recurrence-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-recurrence-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;h3&gt;</span>Donor Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;first-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;last-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;email&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">&quot;address&quot;</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;city&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;state&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;zip&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;country&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;h2&gt;</span>Recurrence<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>Frequency<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;frequency&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Weekly<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>Quarterly<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>Annually<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Start Date<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;start-date&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Day of Week<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;day-of-week&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>Sunday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Monday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>Tuesday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>Wednesday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>Thursday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>Friday<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;6&quot;</span><span class="nt">&gt;</span>Saturday<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Day of Month<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&quot;day-of-month&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;option&gt;</span>1<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>2<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>3<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>4<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>5<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>6<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>7<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>8<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>9<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>10<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>11<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>12<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>13<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>14<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>15<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>16<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>17<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>18<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>19<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>20<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>21<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>22<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>23<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>24<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>25<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>26<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>27<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>28<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>29<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>30<span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;option&gt;</span>31<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
  <span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn-donate&quot;</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-recurrence-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let&#39;s be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let&#39;s make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.BBDonationApiContainer&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;partid&#39;</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we&#39;ll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">MerchantAccountId</span><span class="o">:</span> <span class="s1">&#39;00000000-0000-0000-0000-000000000000&#39;</span><span class="p">,</span>
      <span class="nx">Gift</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">PaymentMethod</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">Designations</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nx">Amount</span><span class="o">:</span> <span class="mf">5.00</span><span class="p">,</span>
            <span class="nx">DesignationId</span><span class="o">:</span> <span class="s1">&#39;00000000-0000-0000-0000-000000000000&#39;</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error!&#39;</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.btn-donate&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
      
      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">FirstName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#first-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">LastName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#last-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">Address</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">StreetAddress</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#address&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">City</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#city&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">State</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#state&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">PostalCode</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#zip&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">Country</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#country&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>
      
      <span class="c1">// The following fields are always required</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">Frequency</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#frequency&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">StartDate</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#start-date&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">};</span>
      
      <span class="c1">// The remaining required values are different depending on what frequency the user selects</span>
      <span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#frequency&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">frequency</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
          <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">DayOfWeek</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#day-of-week&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
        <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
          <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">DayOfMonth</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#day-of-month&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
          <span class="c1">// Purposefully letting selection fall through (no &quot;break&quot;)</span>
        <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
          <span class="nx">donation</span><span class="p">.</span><span class="nx">Gift</span><span class="p">.</span><span class="nx">Recurrence</span><span class="p">.</span><span class="nx">Month</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#month&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">};</span>
        
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-tribute">Tribute Example</h3> <p>In this example, we're back to "proceeding directly to payment," as opposed to using the Payment 2.0 Part. This means we'll need to collect the donor information. I've also introduced the ability to add a tribute.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-tribute-html" data-toggle="tab">HTML</a></li> <li><a href="#example-tribute-js" data-toggle="tab">JS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-tribute-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;h3&gt;</span>Donor Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;first-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;last-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;email&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">&quot;address&quot;</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;city&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;state&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;zip&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;country&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;h3&gt;</span>Tribute Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;tribute-first-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;tribute-last-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Description<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">&quot;tribute-description&quot;</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
      
<span class="nt">&lt;h3&gt;</span>Acknowledgee Information<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;acknowledgee-first-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;acknowledgee-last-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;acknowledgee-email&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">&quot;acknowledgee-address&quot;</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;acknowledgee-city&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;acknowledgee-state&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;acknowledgee-zip&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
  
  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;acknowledgee-country&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>
      
<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn-donate&quot;</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-tribute-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let&#39;s be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Let&#39;s make sure the DOM is ready</span>
  <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.BBDonationApiContainer&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;partid&#39;</span><span class="p">)</span>
    <span class="p">);</span>
    
    <span class="c1">// Create the donation object we&#39;ll send</span>
    <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
    <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">MerchantAccountId</span><span class="o">:</span> <span class="s1">&#39;00000000-0000-0000-0000-000000000000&#39;</span><span class="p">,</span>
      <span class="nx">Tribute</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">Gift</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">PaymentMethod</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">Designations</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nx">Amount</span><span class="o">:</span> <span class="mf">5.00</span><span class="p">,</span>
            <span class="nx">DesignationId</span><span class="o">:</span> <span class="s1">&#39;00000000-0000-0000-0000-000000000000&#39;</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our success handler</span>
    <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Create our error handler</span>
    <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error!&#39;</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Attach our event listener to the donate button</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.btn-donate&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="c1">// Stop the button from submitting the form</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 
      
      <span class="c1">// Add the information our user has typed</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">FirstName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#first-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">LastName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#last-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">Address</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">StreetAddress</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#address&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">City</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#city&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">State</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#state&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">PostalCode</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#zip&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">Country</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#country&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="c1">// Add our tribute information</span>
      <span class="c1">// See REST api tech reference for more information on the Type field</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Tribute</span><span class="p">.</span><span class="nx">TributeDefintion</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">Type</span><span class="o">:</span> <span class="s1">&#39;Tribute&#39;</span><span class="p">,</span>      
        <span class="nx">FirstName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#tribute-first-name&#39;</span><span class="p">),</span>
        <span class="nx">LastName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#tribute-last-name&#39;</span><span class="p">),</span>
        <span class="nx">Description</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;tribute-description&#39;</span><span class="p">)</span>
      <span class="p">};</span>
      
      <span class="c1">// Add our acknowledgee information</span>
      <span class="nx">donation</span><span class="p">.</span><span class="nx">Tribute</span><span class="p">.</span><span class="nx">Acknowledgee</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">FirstName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#acknowledgee-first-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">LastName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#acknowledgee-last-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">Address</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">StreetAddress</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#acknowledgee-address&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">City</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#acknowledgee-city&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">State</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#acknowledgee-state&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">PostalCode</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#acknowledgee-zip&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
          <span class="nx">Country</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#acknowledgee-country&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
        <span class="p">}</span>
      <span class="p">};</span>
      
      <span class="c1">// Submit our donation</span>
      <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
    <span class="p">});</span>
    
  <span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-secure-payments">Using Blackbaud Secure Payments</h3> <p>Integration with the Blackbaud Secure Payments service has been updated in the Advanced Donation Form.</p> <ul class="nav nav-tabs"> <li class="active"> <a href="#example-secure-payments-html" data-toggle="tab">HTML</a> </li> <li> <a href="#example-secure-payments-js" data-toggle="tab">JS</a> </li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-secure-payments-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;dl&gt;</span>
  <span class="nt">&lt;dt&gt;</span>First Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;first-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Last Name<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;last-name&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Email<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;email&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Address<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;textarea</span> <span class="na">id=</span><span class="s">&quot;address&quot;</span><span class="nt">&gt;&lt;/textarea&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>City<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;city&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>State<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;state&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Zip<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;zip&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>

  <span class="nt">&lt;dt&gt;</span>Country<span class="nt">&lt;/dt&gt;</span>
  <span class="nt">&lt;dd&gt;&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;country&quot;</span> <span class="nt">/&gt;&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;p&gt;&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn-donate&quot;</span><span class="nt">&gt;</span>Donate<span class="nt">&lt;/button&gt;&lt;/p&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-secure-payments-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Let&#39;s be good developers and not pollute the global namespace</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>

<span class="c1">// Let&#39;s make sure the DOM is ready</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Create an instance of the DonationService</span>
    <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BLACKBAUD</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">DonationService</span><span class="p">(</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.BBDonationApiContainer&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;partid&#39;</span><span class="p">)</span>
    <span class="p">);</span>

  <span class="c1">// Create the donation object we&#39;ll send</span>
  <span class="c1">// In order to simplify our examples, some of this information is hard-coded.</span>
  <span class="kd">var</span> <span class="nx">donation</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">MerchantAccountId</span><span class="o">:</span> <span class="s1">&#39;00000000-0000-0000-0000-000000000000&#39;</span><span class="p">,</span>
    <span class="nx">BBSPReturnUri</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span>
    <span class="nx">BBSPTemplateSitePageId</span><span class="o">:</span> <span class="mi">000</span><span class="p">,</span>
    <span class="nx">Gift</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">PaymentMethod</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">Designations</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nx">Amount</span><span class="o">:</span> <span class="mf">5.00</span><span class="p">,</span>
          <span class="nx">DesignationId</span><span class="o">:</span> <span class="s1">&#39;00000000-0000-0000-0000-000000000000&#39;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="c1">// Create our success handler</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">returnedDonation</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Create our error handler</span>
  <span class="kd">var</span> <span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">returnedErrors</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Error!&#39;</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// Attach our event listener to the donate button</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.btn-donate&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Stop the button from submitting the form</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> 

    <span class="c1">// Add the information our user has typed</span>
    <span class="nx">donation</span><span class="p">.</span><span class="nx">Donor</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">FirstName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#first-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="nx">LastName</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#last-name&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
      <span class="nx">Address</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">StreetAddress</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#address&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">City</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#city&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">State</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#state&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">PostalCode</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#zip&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span>
        <span class="nx">Country</span><span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#country&#39;</span><span class="p">).</span><span class="nx">val</span><span class="p">()</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="c1">// Submit our donation</span>
    <span class="nx">ds</span><span class="p">.</span><span class="nx">createDonation</span><span class="p">(</span><span class="nx">donation</span><span class="p">,</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">});</span>
<span class="p">}(</span><span class="nx">jQuery</span><span class="p">));</span></code></pre></div> </div> </div> <h3 id="example-complete">Styling + Error Handling + API Integration</h3> <p>This last example is meant to show a more realistic real-world example of the Advanced Donation Form API, including all the necessary error handling and styling. This example also incorporates the use of the <a href="/bbis/reference/javascript/#countryservice">CountryService</a>, which is the javascript wrapper for the <a href="/bbis/reference/rest/#countryapi">Country REST API endpoint</a>.</p> <p>Whereas all the other examples are designed to be inserted into an Advanced Donation Form Part, the complete example is designed to be completely standalone - even on a different server than the one serving your BBIS website.</p> <p>Please note you'll need to update the references in the example below to your BBIS installation.</p> <ul class="nav nav-tabs"> <li class="active"><a href="#example-complete-html" data-toggle="tab">HTML</a></li> <li><a href="#example-complete-js" data-toggle="tab">JS</a></li> <li><a href="#example-complete-css" data-toggle="tab">CSS</a></li> <li class="tab-download"> <a href="http://www.github.com/blackbaud-community/BBIS-Advanced-Donation-Form" target="_blank" data-toggle="tooltip" data-placement="left" title="Download on GitHub"> <i class="fa fa-github"></i> </a> </li> </ul> <div class="tab-content"> <div class="tab-pane active" id="example-complete-html"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span> <span class="na">ng-app=</span><span class="s">&quot;bbADF&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
  
  <span class="nt">&lt;title&gt;</span>ADF - Complete Example<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content=</span><span class="s">&quot;IE=edge&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="nt">&gt;</span>
  
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;example-complete.css&quot;</span><span class="nt">&gt;</span>
    
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  
  <span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">&quot;form-horizontal&quot;</span> <span class="na">ng-controller=</span><span class="s">&quot;DonationController&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-12&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;h1&gt;</span>Advanced Donation Form <span class="nt">&lt;small&gt;</span>Complete Example<span class="nt">&lt;/small&gt;&lt;/h1&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
          
          <span class="nt">&lt;h3&gt;</span>Donor Information<span class="nt">&lt;/h3&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.Firstname&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Firstname&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.Lastname&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Lastname&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-12&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Address&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.Address.StreetAddress&quot;</span><span class="nt">&gt;&lt;/textarea&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.Address.Country&quot;</span> <span class="na">ng-change=</span><span class="s">&quot;getStates()&quot;</span> <span class="na">ng-options=</span><span class="s">&quot;c.Description for c in countries track by c.Id&quot;</span> <span class="na">ng-change=</span><span class="s">&quot;getStates()&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>Country<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.Address.State&quot;</span> <span class="na">ng-options=</span><span class="s">&quot;s.Description for s in states track by s.Id&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>State<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-9&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;City&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.Address.City&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-3&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Zip&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.Address.PostalCode&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-8&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Email&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.EmailAddress&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-4&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Phone&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.Phone&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-4&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.IsCorporate&quot;</span> <span class="na">btn-checkbox</span><span class="nt">&gt;</span>
                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">&quot;fa fa-fw&quot;</span> <span class="na">ng-class=</span><span class="s">&quot;{ &#39;fa-square-o&#39;: !Gift.IsCorporate, &#39;fa-check-square-o&#39;: Gift.IsCorporate }&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> Corporate?
              <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-8&quot;</span> <span class="na">ng-show=</span><span class="s">&quot;Gift.IsCorporate&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Donor.OrganizationName&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Organization Name&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-4&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.isAnonymous&quot;</span> <span class="na">btn-checkbox</span><span class="nt">&gt;</span>
                <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">&quot;fa fa-fw&quot;</span> <span class="na">ng-class=</span><span class="s">&quot;{ &#39;fa-square-o&#39;: !Gift.isAnonymous, &#39;fa-check-square-o&#39;: Gift.isAnonymous }&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> Anonymous?
              <span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
        
          <span class="nt">&lt;h3&gt;</span>Gift Information<span class="nt">&lt;/h3&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;btn-group&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">ng-repeat=</span><span class="s">&quot;option in amounts&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;defaults.amount&quot;</span> <span class="na">btn-radio=</span><span class="s">&quot;option.amount&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-bind=</span><span class="s">&quot;option.label&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;btn-group&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">ng-repeat=</span><span class="s">&quot;option in payments&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;defaults.payments&quot;</span> <span class="na">btn-radio=</span><span class="s">&quot;option.id&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-bind=</span><span class="s">&quot;option.label&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span> <span class="na">ng-show=</span><span class="s">&quot;defaults.amount == &#39;other&#39;&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-12&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;input-group&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;input-group-addon&quot;</span><span class="nt">&gt;</span>$<span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.Amount&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Other Amount&quot;</span> <span class="na">ng-required=</span><span class="s">&quot;Gift.SelectedAmount == &#39;other&#39;&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-12&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.Comments&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Comments&quot;</span><span class="nt">&gt;&lt;/textarea&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;defaults.designation&quot;</span> <span class="na">ng-options=</span><span class="s">&quot;designation.label for designation in designations track by designation.id&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
                <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>Designation<span class="nt">&lt;/option&gt;</span>
              <span class="nt">&lt;/select&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;btn-group&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">ng-repeat=</span><span class="s">&quot;option in types&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;defaults.type&quot;</span> <span class="na">btn-radio=</span><span class="s">&quot;option.id&quot;</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">ng-bind=</span><span class="s">&quot;option.label&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
                <span class="nt">&lt;/label&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
          
          <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">&quot;defaults.type == &#39;recurring&#39;&quot;</span><span class="nt">&gt;</span>

            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;input-group&quot;</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.Recurrence.StartDate&quot;</span> <span class="na">datepicker-popup=</span><span class="s">&quot;MMMM dd, yyyy&quot;</span> <span class="na">is-open=</span><span class="s">&quot;openedStartDate&quot;</span> <span class="na">show-button-bar=</span><span class="s">&quot;false&quot;</span> <span class="na">min-date=</span><span class="s">&quot;minDate&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;Start Date&quot;</span> <span class="na">required</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;input-group-btn&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">ng-click=</span><span class="s">&quot;open($event, &#39;openedStartDate&#39;)&quot;</span><span class="nt">&gt;</span>
                      <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">&quot;fa fa-calendar&quot;</span><span class="nt">&gt;&lt;/i&gt;</span>
                    <span class="nt">&lt;/button&gt;</span>
                  <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;input-group&quot;</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.Recurrence.EndDate&quot;</span> <span class="na">datepicker-popup=</span><span class="s">&quot;MMMM dd, yyyy&quot;</span> <span class="na">is-open=</span><span class="s">&quot;openedEndDate&quot;</span> <span class="na">show-button-bar=</span><span class="s">&quot;false&quot;</span> <span class="na">min-date=</span><span class="s">&quot;minDate&quot;</span> <span class="na">placeholder=</span><span class="s">&quot;End Date&quot;</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;input-group-btn&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">class=</span><span class="s">&quot;btn btn-default&quot;</span> <span class="na">ng-click=</span><span class="s">&quot;open($event, &#39;openedEndDate&#39;)&quot;</span><span class="nt">&gt;</span>
                      <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">&quot;fa fa-calendar&quot;</span><span class="nt">&gt;&lt;/i&gt;</span>
                    <span class="nt">&lt;/button&gt;</span>
                  <span class="nt">&lt;/span&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
            
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-4&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.Recurrence.Frequency&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>Frequency<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Weekly<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>Monthly<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>Quarterly<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>Annually<span class="nt">&lt;/option&gt;</span>
                <span class="nt">&lt;/select&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">&quot;Gift.Recurrence.Frequency&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-4&quot;</span> <span class="na">ng-show=</span><span class="s">&quot;Gift.Recurrence.Frequency == 1&quot;</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.Recurrence.Month&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>Month<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>January<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>February<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>March<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>April<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>May<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;6&quot;</span><span class="nt">&gt;</span>June<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;7&quot;</span><span class="nt">&gt;</span>July<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;8&quot;</span><span class="nt">&gt;</span>August<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;9&quot;</span><span class="nt">&gt;</span>September<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="nt">&gt;</span>October<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;11&quot;</span><span class="nt">&gt;</span>November<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;12&quot;</span><span class="nt">&gt;</span>December<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;/select&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-4&quot;</span> <span class="na">ng-show=</span><span class="s">&quot;Gift.Recurrence.Frequency == 1&quot;</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.Recurrence.DayOfWeek&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>Day of Week<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">&gt;</span>Sunday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Monday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>Tuesday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>Wednesday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>Thursday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>Friday<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;6&quot;</span><span class="nt">&gt;</span>Saturday<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;/select&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
                <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-4&quot;</span> <span class="na">ng-show=</span><span class="s">&quot;Gift.Recurrence.Frequency != 1&quot;</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">&quot;form-control&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;Gift.Reccurence.DayOfMonth&quot;</span> <span class="na">required</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">&gt;</span>Day of Month<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>1<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>2<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;3&quot;</span><span class="nt">&gt;</span>3<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;4&quot;</span><span class="nt">&gt;</span>4<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">&gt;</span>5<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;6&quot;</span><span class="nt">&gt;</span>6<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;7&quot;</span><span class="nt">&gt;</span>7<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;8&quot;</span><span class="nt">&gt;</span>8<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;9&quot;</span><span class="nt">&gt;</span>9<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;10&quot;</span><span class="nt">&gt;</span>10<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;11&quot;</span><span class="nt">&gt;</span>11<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;12&quot;</span><span class="nt">&gt;</span>12<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;13&quot;</span><span class="nt">&gt;</span>13<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;14&quot;</span><span class="nt">&gt;</span>14<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;15&quot;</span><span class="nt">&gt;</span>15<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;16&quot;</span><span class="nt">&gt;</span>16<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;17&quot;</span><span class="nt">&gt;</span>17<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;18&quot;</span><span class="nt">&gt;</span>18<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;19&quot;</span><span class="nt">&gt;</span>19<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;20&quot;</span><span class="nt">&gt;</span>20<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;21&quot;</span><span class="nt">&gt;</span>21<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;22&quot;</span><span class="nt">&gt;</span>22<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;23&quot;</span><span class="nt">&gt;</span>23<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;24&quot;</span><span class="nt">&gt;</span>24<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;25&quot;</span><span class="nt">&gt;</span>25<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;26&quot;</span><span class="nt">&gt;</span>26<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;27&quot;</span><span class="nt">&gt;</span>27<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;28&quot;</span><span class="nt">&gt;</span>28<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;29&quot;</span><span class="nt">&gt;</span>29<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;30&quot;</span><span class="nt">&gt;</span>30<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;31&quot;</span><span class="nt">&gt;</span>31<span class="nt">&lt;/option&gt;</span>
                  <span class="nt">&lt;/select&gt;</span>
                <span class="nt">&lt;/div&gt;</span>
              <span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;/div&gt;</span>

          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>

          <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;form-group&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-12&quot;</span><span class="nt">&gt;</span>
              
            <span class="nt">&lt;/div&gt;</span>
          <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-6&quot;</span><span class="nt">&gt;</span>
          
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;col-sm-12&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;p&gt;</span>
            <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn btn-lg btn-primary btn-donate&quot;</span> <span class="na">ng-click=</span><span class="s">&quot;log()&quot;</span><span class="nt">&gt;</span>
              <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">&quot;fa fa-lock&quot;</span><span class="nt">&gt;&lt;/i&gt;</span> Donate
            <span class="nt">&lt;/button&gt;</span>
          <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  
  <span class="nt">&lt;/form&gt;</span>
  
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.2/ui-bootstrap-tpls.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//code.jquery.com/jquery-1.11.1.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>  
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//chs6bobbyear02.blackbaud.global/Client/Scripts/easyXDM/easyXDM.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;//chs6bobbyear02.blackbaud.global/Client/Scripts/API/BBAPI-min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;example-complete.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
  
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-js"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-js" data-lang="js"><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="c1">// Create our Angular application</span>
<span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;bbADF&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ui.bootstrap&#39;</span><span class="p">])</span>
<span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;DonationController&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">CountryService</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Controls the available donor types</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">// single | recurring</span>
    <span class="nx">payments</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">// credit | later</span>
    <span class="nx">amount</span><span class="o">:</span> <span class="mi">0</span> <span class="c1">// dollar amount | other</span>
  <span class="p">};</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">types</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;single&#39;</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Single Gift&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;recurring&#39;</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Recurring Gift&#39;</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">payments</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;credit&#39;</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Credit Card&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;later&#39;</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Bill Me Later&#39;</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">amounts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">amount</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;$5&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">amount</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;$10&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">amount</span><span class="o">:</span> <span class="mi">25</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;$25&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">amount</span><span class="o">:</span> <span class="s1">&#39;other&#39;</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Other&#39;</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="nx">$scope</span><span class="p">.</span><span class="nx">designations</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;0001&#39;</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Designation 1&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;0002&#39;</span><span class="p">,</span>
      <span class="nx">label</span><span class="o">:</span> <span class="s1">&#39;Designation 2&#39;</span>
    <span class="p">}</span>
  <span class="p">];</span>

  <span class="c1">// Calendar manipulation</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">minDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$event</span><span class="p">,</span> <span class="nx">opened</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">$event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="nx">$scope</span><span class="p">[</span><span class="nx">opened</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1">// Temporarily debugging</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">};</span>
  
  <span class="c1">// Request the states for a particular country</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">getStates</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">CountryService</span><span class="p">.</span><span class="nx">getStates</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">Donor</span><span class="p">.</span><span class="nx">Address</span><span class="p">.</span><span class="nx">Country</span><span class="p">.</span><span class="nx">Id</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">states</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Error loading states.&#39;</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">CountryService</span><span class="p">.</span><span class="nx">getCountries</span><span class="p">().</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">countries</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
  <span class="p">}).</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Error loading countries.&#39;</span><span class="p">);</span>
  <span class="p">});</span>

<span class="p">})</span>
<span class="p">.</span><span class="nx">service</span><span class="p">(</span><span class="s1">&#39;CountryService&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
  
  <span class="c1">// Baseurl when using the Advanced Donation Form API</span>
  <span class="kd">var</span> <span class="nx">baseurl</span> <span class="o">=</span> <span class="s1">&#39;http://chs6bobbyear02.blackbaud.global/Webapi/&#39;</span><span class="p">;</span>

  <span class="c1">// Request countries</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">getCountries</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">baseurl</span> <span class="o">+</span> <span class="s1">&#39;Country&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Request states when a country is selected</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">getStates</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">baseurl</span> <span class="o">+</span> <span class="s1">&#39;Country/&#39;</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;/State&#39;</span><span class="p">);</span>
  <span class="p">};</span>

<span class="p">});</span></code></pre></div> </div> <div class="tab-pane" id="example-complete-css"> <div class="copy-code" title="Copy to Clipboard" data-trigger="manual" data-placement="left" data-container="body"> <i class="fa fa-files-o"></i> </div> <div class="highlight"><pre><code class="language-css" data-lang="css"><span class="c">/* Currently only using Bootstrap styles */</span></code></pre></div> </div> </div> </div> <!-- .col-md-9 --> </div> <!-- .row --> </div> <!-- .container --> </div> <!-- .content --> <div class="footer"> <div class="container"> <div class="row"> <div class="col-xs-6 col-sm-4"> <p> <a href="/bbis"> <img src="/bbis/assets/img/logo-lonely.png" alt="Blackbaud Internet Solutions" class="img-responsive" /> </a> </p> <ul class="list-unstyled"> <li> <a href="/bbis/start/">Getting Started</a> </li> <li> <a href="/bbis/guide/">Developer Guide</a> </li> <li> <a href="/bbis/reference/">Technical Reference</a> </li> <li> <a href="/bbis/code/">Code Samples</a> </li> <li> <a href="/bbis/help/">Help</a> </li> </ul> <!-- .list-unstyled --> </div> <!-- .col-sm-4 --> <div class="col-xs-6 col-sm-4"> <p> <a href="http://www.bbdevnetwork.com" target="_blank"> <img src="/bbis/assets/img/logo-developer-small.png" alt="Blackbaud Developer Network" class="img-responsive" /> </a> </p> <ul class="list-unstyled"> <li> <a href="https://www.blackbaud.com/nonprofit-resources/sdk-resources.aspx" target="_blank"> Blackbaud Infinity SDK </a> </li> <li> <a href="http://open.convio.com/" target="_blank"> Blackbaud Luminate </a> </li> <li> <a href="https://www.blackbaud.com/files/support/netcommunity-developer/netcommunity-developer.htm" target="_blank"> Blackbaud NetCommunity </a> </li> <li> <a href="https://www.blackbaud.com/files/support/guides/re7ent/api.pdf" target="_blank"> Blackbaud Raiser's Edge </a> </li> <li> <a href="http://developer.everydayhero.com" target="_blank"> Everyday Hero </a> </li> </ul> <!-- .list-unstyled --> </div> <!-- .col-sm-4 --> <div class="col-sm-4"> <div class="row"> <div class="col-sm-12"> <ul class="list-inline bb-love"> <li> <a href="http://www.blackbaud.com" target="_blank"> <img src="/bbis/assets/img/logo-bb-white.png" alt="Blackbaud" class="img-responsive" /> </a> </li> <li> <i class="fa fa-lg fa-plus"></i> </li> <li> <a href="http://www.github.com/blackbaud-community" target="_blank"> <img src="/bbis/assets/img/logo-github.png" alt="GitHub" class="img-responsive" /> </a> </li> </ul> <!-- .list-inline --> </div> <!-- .col-sm-12 --> </div> <!-- .row --> <div class="row"> <div class="col-sm-12"> <ul class="list-inline social-icons"> <li> <a href="https://github.com/blackbaud-community" target="_blank"> <i class="fa fa-github"></i> </a> </li> <li> <a href="https://plus.google.com/113382459921828617974" target="_blank"> <i class="fa fa-google-plus"></i> </a> </li> <li> <a href="http://twitter.com/blackbaud" target="_blank"> <i class="fa fa-twitter"></i> </a> </li> <li> <a href="https://www.facebook.com/blackbaud" target="_blank"> <i class="fa fa-facebook"></i> </a> </li> <li> <a href="http://www.youtube.com/user/blackbaudinc" target="_blank"> <i class="fa fa-youtube"></i> </a> </li> </ul> <!-- .list-inline --> </div> <!-- .col-sm-12 --> </div> <!-- .row --> </div> <!-- .col-sm-4 --> </div> <!-- .row --> </div> <!-- .container --> </div> <!-- .footer --> <div class="copyright"> <div class="container"> <div class="row"> <div class="col-sm-6"> <p>&copy; 2014 Blackbaud, Inc. All rights reserved.</p> </div> <div class="col-sm-6"> <p class="feedback-link"> <a href="/bbis/help/">Provide Feedback</a> </p> </div> </div> </div> </div> <!-- .copyright --> <div id="omnibar"> &nbsp; </div> <script src="//code.jquery.com/jquery-1.11.1.min.js"></script> <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script> <script src="/bbis/assets/js/combine.site.js?v=2014-12-10-02:01:59"></script> </body> </html>